'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.escapeAttrValue = escapeAttrValue;
exports.escapeText = escapeText;
var ATTR_VALUE_REGEX_TEST = /[\xA0"&]/;
var ATTR_VALUE_REGEX_REPLACE = new RegExp(ATTR_VALUE_REGEX_TEST.source, 'g');
var TEXT_REGEX_TEST = /[\xA0&<>]/;
var TEXT_REGEX_REPLACE = new RegExp(TEXT_REGEX_TEST.source, 'g');
function attrValueReplacer(char) {
    switch (char.charCodeAt(0)) {
        case 160 /* NBSP */:
            return '&nbsp;';
        case 34 /* QUOT */:
            return '&quot;';
        case 38 /* AMP */:
            return '&amp;';
        default:
            return char;
    }
}
function textReplacer(char) {
    switch (char.charCodeAt(0)) {
        case 160 /* NBSP */:
            return '&nbsp;';
        case 38 /* AMP */:
            return '&amp;';
        case 60 /* LT */:
            return '&lt;';
        case 62 /* GT */:
            return '&gt;';
        default:
            return char;
    }
}
function escapeAttrValue(attrValue) {
    if (ATTR_VALUE_REGEX_TEST.test(attrValue)) {
        return attrValue.replace(ATTR_VALUE_REGEX_REPLACE, attrValueReplacer);
    }
    return attrValue;
}
function escapeText(text) {
    if (TEXT_REGEX_TEST.test(text)) {
        return text.replace(TEXT_REGEX_REPLACE, textReplacer);
    }
    return text;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXRpbC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3BhY2thZ2VzL0BnbGltbWVyL3N5bnRheC9saWIvZ2VuZXJhdGlvbi91dGlsLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O1FBMENnQixBQUFlO1FBT2YsQUFBVTtBQXpDMUIsSUFBTSxBQUFxQix3QkFBRyxBQUFVLEFBQUM7QUFDekMsSUFBTSxBQUF3QiwyQkFBRyxJQUFJLEFBQU0sT0FBQyxBQUFxQixzQkFBQyxBQUFNLFFBQUUsQUFBRyxBQUFDLEFBQUM7QUFFL0UsSUFBTSxBQUFlLGtCQUFHLEFBQVcsQUFBQztBQUNwQyxJQUFNLEFBQWtCLHFCQUFHLElBQUksQUFBTSxPQUFDLEFBQWUsZ0JBQUMsQUFBTSxRQUFFLEFBQUcsQUFBQyxBQUFDO0FBRW5FLFNBQVMsQUFBaUIsa0JBQUMsQUFBWSxNQUNyQztZQUFRLEFBQUksS0FBQyxBQUFVLFdBQUMsQUFBQyxBQUFDLEFBQUUsQUFDMUI7aUJBQ0U7bUJBQU8sQUFBUSxBQUFDLEFBQ2xCO2dCQUNFO21CQUFPLEFBQVEsQUFBQyxBQUNsQjtnQkFDRTttQkFBTyxBQUFPLEFBQUMsQUFDakIsQUFDRTs7bUJBQU8sQUFBSSxBQUFDLEFBQ2YsQUFDSCxBQUFDOzs7QUFFRCxTQUFTLEFBQVksYUFBQyxBQUFZLE1BQ2hDO1lBQVEsQUFBSSxLQUFDLEFBQVUsV0FBQyxBQUFDLEFBQUMsQUFBRSxBQUMxQjtpQkFDRTttQkFBTyxBQUFRLEFBQUMsQUFDbEI7Z0JBQ0U7bUJBQU8sQUFBTyxBQUFDLEFBQ2pCO2dCQUNFO21CQUFPLEFBQU0sQUFBQyxBQUNoQjtnQkFDRTttQkFBTyxBQUFNLEFBQUMsQUFDaEIsQUFDRTs7bUJBQU8sQUFBSSxBQUFDLEFBQ2YsQUFDSCxBQUFDOztBQUVELEFBQU07eUJBQTBCLEFBQWlCLFdBQy9DO1FBQUksQUFBcUIsc0JBQUMsQUFBSSxLQUFDLEFBQVMsQUFBQyxZQUFFLEFBQ3pDO2VBQU8sQUFBUyxVQUFDLEFBQU8sUUFBQyxBQUF3QiwwQkFBRSxBQUFpQixBQUFDLEFBQUMsQUFDdkUsQUFDRDs7V0FBTyxBQUFTLEFBQUMsQUFDbkIsQUFBQztBQUVELEFBQU07b0JBQXFCLEFBQVksTUFDckM7UUFBSSxBQUFlLGdCQUFDLEFBQUksS0FBQyxBQUFJLEFBQUMsT0FBRSxBQUM5QjtlQUFPLEFBQUksS0FBQyxBQUFPLFFBQUMsQUFBa0Isb0JBQUUsQUFBWSxBQUFDLEFBQUMsQUFDdkQsQUFDRDs7V0FBTyxBQUFJLEFBQUMsQUFDZCxBQUFDIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgZW51bSBDaGFyIHtcbiAgTkJTUCA9IDB4YTAsXG4gIFFVT1QgPSAweDIyLFxuICBMVCA9IDB4M2MsXG4gIEdUID0gMHgzZSxcbiAgQU1QID0gMHgyNixcbn1cblxuY29uc3QgQVRUUl9WQUxVRV9SRUdFWF9URVNUID0gL1tcXHhBMFwiJl0vO1xuY29uc3QgQVRUUl9WQUxVRV9SRUdFWF9SRVBMQUNFID0gbmV3IFJlZ0V4cChBVFRSX1ZBTFVFX1JFR0VYX1RFU1Quc291cmNlLCAnZycpO1xuXG5jb25zdCBURVhUX1JFR0VYX1RFU1QgPSAvW1xceEEwJjw+XS87XG5jb25zdCBURVhUX1JFR0VYX1JFUExBQ0UgPSBuZXcgUmVnRXhwKFRFWFRfUkVHRVhfVEVTVC5zb3VyY2UsICdnJyk7XG5cbmZ1bmN0aW9uIGF0dHJWYWx1ZVJlcGxhY2VyKGNoYXI6IHN0cmluZykge1xuICBzd2l0Y2ggKGNoYXIuY2hhckNvZGVBdCgwKSkge1xuICAgIGNhc2UgQ2hhci5OQlNQOlxuICAgICAgcmV0dXJuICcmbmJzcDsnO1xuICAgIGNhc2UgQ2hhci5RVU9UOlxuICAgICAgcmV0dXJuICcmcXVvdDsnO1xuICAgIGNhc2UgQ2hhci5BTVA6XG4gICAgICByZXR1cm4gJyZhbXA7JztcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIGNoYXI7XG4gIH1cbn1cblxuZnVuY3Rpb24gdGV4dFJlcGxhY2VyKGNoYXI6IHN0cmluZykge1xuICBzd2l0Y2ggKGNoYXIuY2hhckNvZGVBdCgwKSkge1xuICAgIGNhc2UgQ2hhci5OQlNQOlxuICAgICAgcmV0dXJuICcmbmJzcDsnO1xuICAgIGNhc2UgQ2hhci5BTVA6XG4gICAgICByZXR1cm4gJyZhbXA7JztcbiAgICBjYXNlIENoYXIuTFQ6XG4gICAgICByZXR1cm4gJyZsdDsnO1xuICAgIGNhc2UgQ2hhci5HVDpcbiAgICAgIHJldHVybiAnJmd0Oyc7XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBjaGFyO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBlc2NhcGVBdHRyVmFsdWUoYXR0clZhbHVlOiBzdHJpbmcpIHtcbiAgaWYgKEFUVFJfVkFMVUVfUkVHRVhfVEVTVC50ZXN0KGF0dHJWYWx1ZSkpIHtcbiAgICByZXR1cm4gYXR0clZhbHVlLnJlcGxhY2UoQVRUUl9WQUxVRV9SRUdFWF9SRVBMQUNFLCBhdHRyVmFsdWVSZXBsYWNlcik7XG4gIH1cbiAgcmV0dXJuIGF0dHJWYWx1ZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGVzY2FwZVRleHQodGV4dDogc3RyaW5nKSB7XG4gIGlmIChURVhUX1JFR0VYX1RFU1QudGVzdCh0ZXh0KSkge1xuICAgIHJldHVybiB0ZXh0LnJlcGxhY2UoVEVYVF9SRUdFWF9SRVBMQUNFLCB0ZXh0UmVwbGFjZXIpO1xuICB9XG4gIHJldHVybiB0ZXh0O1xufVxuIl19